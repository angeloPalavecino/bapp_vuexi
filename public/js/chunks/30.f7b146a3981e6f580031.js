(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"6wlp":function(t,a,e){"use strict";var i=e("bJaO");function r(t){if(null==t)throw new TypeError("Cannot destructure undefined")}var s={agregarItem:function(t,a){return r(t),new Promise((function(t,e){i.a.post("/api/v1"+a.Url+"store",a.item).then((function(a){t(a)})).catch((function(t){e(t)}))}))},editarItem:function(t,a){return r(t),new Promise((function(t,e){i.a.put("/api/v1"+a.Url+a.item.id,a.item).then((function(a){t(a)})).catch((function(t){e(t)}))}))},traerItems:function(t,a){var e=t.commit;return new Promise((function(t,r){i.a.get("/api/v1"+a).then((function(a){e("SET_ITEMS",a.data.items),t(a)})).catch((function(t){r(t)}))}))},traerItem:function(t,a){return r(t),new Promise((function(t,e){i.a.get("/api/v1"+a.Url+"".concat(a.Id)).then((function(a){t(a)})).catch((function(t){e(t)}))}))},borrarItem:function(t,a){var e=t.commit;return new Promise((function(t,r){i.a.delete("/api/v1"+a.Url+"".concat(a.Id)).then((function(i){e("REMOVE_RECORD",a.Id),t(i)})).catch((function(t){r(t)}))}))},borrarMasivoItem:function(t,a){var e=t.commit;return new Promise((function(t,r){i.a.post("/api/v1"+a.Url+"borrar",a.Items).then((function(i){e("REMOVE_MASSIVE_RECORD",a.Items),t(i)})).catch((function(t){r(t)}))}))}};a.a={isRegistered:!1,namespaced:!0,state:{items:[]},mutations:{SET_ITEMS:function(t,a){t.items=a},REMOVE_RECORD:function(t,a){var e=t.items.findIndex((function(t){return t.id==a}));t.items.splice(e,1)},REMOVE_MASSIVE_RECORD:function(t,a){a.forEach((function(a){var e=t.items.findIndex((function(t){return t.id==a.id}));t.items.splice(e,1)}))}},actions:s,getters:{}}},VjlF:function(t,a,e){"use strict";e.r(a);var i=e("Snq/"),r=e.n(i),s=e("bJaO");e("e7F3").a.localize("en",{custom:{empresa:{required:"La empresa es requerida"},comuna:{required:"La comuna es requerida"},distancia:{required:"La distancia es requerida",decimal:"El valor debe ser numerico"},tipo:{required:"El tipo es requerido"}}});var n={components:{vSelect:r.a},props:{data:{type:Object,required:!0}},data:function(){return{urlApi:"/fuerazonas/fuerazonas/",data_local:{id:this.data.id?this.data.id:null,distancia:this.data.distancia?this.data.distancia:null,comuna:this.data.comuna?this.data.comuna:null,empresa_id:this.data.empresa_id?this.data.empresa_id:null,tipo:this.data.tipo?this.data.tipo:null},typeOptions:[{label:"Fuera zona 1",value:"1"},{label:"Fuera zona 2",value:"2"},{label:"Fuera zona 3",value:"3"}],empresaOptions:[]}},computed:{validateForm:function(){return!this.errors.any()}},mounted:function(){this.traeOtrosDatos()},methods:{save_changes:function(){var t=this;this.$validator.validateAll().then((function(a){a&&t.$store.dispatch("itemManagement/editarItem",{item:t.data_local,Url:t.urlApi}).then((function(){t.$router.push({name:"fuerazonas"}),t.showDeleteSuccess()})).catch((function(a){var e=300==a.response.status?a.response.data.message:a;t.$vs.notify({title:"Error",text:e,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}))},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Guardar registros",text:"Los registros se han guardado exitosamente."})},reset_data:function(){this.data_local={id:this.data.id?this.data.id:null,distancia:this.data.distancia?this.data.distancia:null,comuna:this.data.comuna?this.data.comuna:null,empresa_id:this.data.empresa_id?this.data.empresa_id:null,tipo:this.data.tipo?this.data.tipo:null},this.errors.clear()},traeOtrosDatos:function(){var t=this;s.a.get("/api/v1/empresas/empresas").then((function(a){t.empresaOptions=a.data.items})).catch((function(a){var e=300==a.response.status?a.response.data.message:a;t.$vs.notify({title:"Error",text:e,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}}},o=e("KHd+"),c=Object(o.a)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"item-edit"}},[e("div",{staticClass:"vx-row mt-6"},[e("vs-divider",{attrs:{color:"primary"}},[e("h5",[t._v("Datos Fuera de Zona")])]),t._v(" "),e("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[e("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"empresa",staticClass:"w-full p-1",attrs:{label:"Empresa",name:"empresa",dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.data_local.empresa_id,callback:function(a){t.$set(t.data_local,"empresa_id",a)},expression:"data_local.empresa_id"}},t._l(t.empresaOptions,(function(t){return e("vs-select-item",{key:t.id,attrs:{value:t.id,text:t.razon_social}})})),1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("empresa"),expression:"errors.has('empresa')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("empresa")))])],1),t._v(" "),e("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[e("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"tipo",staticClass:"w-full p-1",attrs:{label:"Tipo",name:"tipo",dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.data_local.tipo,callback:function(a){t.$set(t.data_local,"tipo",a)},expression:"data_local.tipo"}},t._l(t.typeOptions,(function(t){return e("vs-select-item",{key:t.value,attrs:{value:t.value,text:t.label}})})),1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("tipo"),expression:"errors.has('tipo')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("tipo")))])],1),t._v(" "),e("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full p-1",attrs:{"label-placeholder":"Comuna",name:"comuna",danger:!!t.errors.first("comuna"),"danger-text":t.errors.first("comuna")?t.errors.first("comuna"):"","val-icon-danger":"clear"},model:{value:t.data_local.comuna,callback:function(a){t.$set(t.data_local,"comuna",a)},expression:"data_local.comuna"}})],1),t._v(" "),e("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"w-full p-1",attrs:{"label-placeholder":"Distancia",name:"distancia",danger:!!t.errors.first("distancia"),"danger-text":t.errors.first("distancia")?t.errors.first("distancia"):"","val-icon-danger":"clear"},model:{value:t.data_local.distancia,callback:function(a){t.$set(t.data_local,"distancia",a)},expression:"data_local.distancia"}})],1)],1),t._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full"},[e("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[e("vx-tooltip",{attrs:{color:"primary",text:"Guardar"}},[e("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:!t.validateForm},on:{click:t.save_changes}},[t._v("Guardar Cambios")])],1),t._v(" "),e("vx-tooltip",{attrs:{color:"primary",text:"Volver"}},[e("vs-button",{staticClass:"ml-4 mt-2",attrs:{"icon-pack":"feather",icon:"icon-arrow-left",to:{name:"fuerazonas"}}},[t._v("Volver")])],1),t._v(" "),e("vx-tooltip",{attrs:{color:"primary",text:"Limpiar"}},[e("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"},on:{click:t.reset_data}},[t._v("Limpiar")])],1)],1)])])])}),[],!1,null,null,null).exports,l=e("6wlp"),d={components:{itemEditSection1:c},data:function(){return{item_data:null,item_not_found:!1,urlApi:"/fuerazonas/fuerazonas/"}},watch:{activeTab:function(){this.fetch_item_data(this.$route.params.itemId)}},methods:{fetch_item_data:function(t){var a=this;this.$store.dispatch("itemManagement/traerItem",{Id:t,Url:this.urlApi}).then((function(t){a.item_data=t.data.item[0]})).catch((function(t){404!==t.response.status?300==t.response.status?a.$vs.notify({title:"Error",text:t.response.data.message,color:"danger",iconPack:"feather",icon:"icon-alert-circle"}):a.$vs.notify({title:"Error",text:t,color:"danger",iconPack:"feather",icon:"icon-alert-circle"}):a.item_not_found=!0}))}},created:function(){l.a.isRegistered||(this.$store.registerModule("itemManagement",l.a),l.a.isRegistered=!0),this.fetch_item_data(this.$route.params.itemId)}},u=Object(o.a)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"page-item-edit"}},[e("vs-alert",{attrs:{color:"danger",title:"Fuera de zona no encontrado",active:t.item_not_found},on:{"update:active":function(a){t.item_not_found=a}}},[e("span",[t._v("La fuera de zona con id: "+t._s(t.$route.params.itemId)+" no fue encontrado. ")]),t._v(" "),e("span",[e("span",[t._v("Mira  ")]),e("router-link",{staticClass:"text-inherit underline",attrs:{to:{name:"fuerazonas"}}},[t._v("Todas las fueras de zona")])],1)]),t._v(" "),t.item_data?e("vx-card",[e("item-edit-section1",{staticClass:"mt-4",attrs:{data:t.item_data}})],1):t._e()],1)}),[],!1,null,null,null);a.default=u.exports}}]);