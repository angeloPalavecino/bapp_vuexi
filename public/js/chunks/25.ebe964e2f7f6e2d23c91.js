(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"6wlp":function(t,e,a){"use strict";var s=a("bJaO");function r(t){if(null==t)throw new TypeError("Cannot destructure undefined")}var i={agregarItem:function(t,e){return r(t),new Promise((function(t,a){s.a.post("/api/v1"+e.Url+"store",e.item).then((function(e){t(e)})).catch((function(t){a(t)}))}))},editarItem:function(t,e){return r(t),new Promise((function(t,a){var r="";r=e.item.id?e.Url+e.item.id:e.Url,s.a.put("/api/v1"+r,e.item).then((function(e){t(e)})).catch((function(t){a(t)}))}))},traerItems:function(t,e){var a=t.commit;return new Promise((function(t,r){s.a.get("/api/v1"+e).then((function(e){a("SET_ITEMS",e.data.items),t(e)})).catch((function(t){r(t)}))}))},traerItem:function(t,e){return r(t),new Promise((function(t,a){s.a.get("/api/v1"+e.Url+"".concat(e.Id)).then((function(e){t(e)})).catch((function(t){a(t)}))}))},borrarItem:function(t,e){var a=t.commit;return new Promise((function(t,r){s.a.delete("/api/v1"+e.Url+"".concat(e.Id)).then((function(s){a("REMOVE_RECORD",e.Id),t(s)})).catch((function(t){r(t)}))}))},borrarMasivoItem:function(t,e){var a=t.commit;return new Promise((function(t,r){s.a.post("/api/v1"+e.Url+"borrar",e.Items).then((function(s){a("REMOVE_MASSIVE_RECORD",e.Items),t(s)})).catch((function(t){r(t)}))}))}};e.a={isRegistered:!1,namespaced:!0,state:{items:[]},mutations:{SET_ITEMS:function(t,e){t.items=e},REMOVE_RECORD:function(t,e){var a=t.items.findIndex((function(t){return t.id==e}));t.items.splice(a,1)},REMOVE_MASSIVE_RECORD:function(t,e){e.forEach((function(e){var a=t.items.findIndex((function(t){return t.id==e.id}));t.items.splice(a,1)}))}},actions:i,getters:{}}},Pbdx:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".permisos .vs-checkbox {\n  -webkit-box-pack: center !important;\n          justify-content: center !important;\n}\n.permisos th .vs-table-text {\n  -webkit-box-pack: center !important;\n          justify-content: center !important;\n}\n[dir] .permisos td {\n  padding: 4px !important;\n}",""])},Pcd7:function(t,e,a){"use strict";a.r(e);var s=a("Snq/"),r=a.n(s),i=a("bJaO");a("e7F3").a.localize("en",{custom:{name:{required:"El nombre es requerido"},permisos:{required:"Debe seleccionar al menos 1 permiso"}}});var n={components:{vSelect:r.a},props:{},data:function(){return{urlApi:"/roles/roles/",data_local:{permisos:[]},permisosOptions:[]}},computed:{validateForm:function(){return!this.errors.any()}},mounted:function(){this.traeOtrosDatos()},methods:{save_changes:function(){var t=this;this.$validator.validateAll().then((function(e){e&&t.$store.dispatch("itemManagement/agregarItem",{item:t.data_local,Url:t.urlApi}).then((function(){t.$router.push({name:"roles"}),t.showDeleteSuccess()})).catch((function(e){var a=300==e.response.status?e.response.data.message:e;t.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}))},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Guardar registros",text:"Los registros se han guardado exitosamente."})},reset_data:function(){this.data_local={permisos:[]},this.errors.clear()},traeOtrosDatos:function(){var t=this;i.a.get("/api/v1/permisos/permisos").then((function(e){t.permisosOptions=e.data.permisos_aux})).catch((function(e){var a=300==e.response.status?e.response.data.message:e;t.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}}},o=(a("o6W3"),a("KHd+")),c=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"item-add"}},[a("div",{staticClass:"vx-row mt-6"},[a("vs-divider",{attrs:{color:"primary"}},[a("h5",[t._v("Datos Rol")])]),t._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full p-1",attrs:{"label-placeholder":"Nombre",name:"name",danger:!!t.errors.first("name"),"danger-text":t.errors.first("name")?t.errors.first("name"):"","val-icon-danger":"clear"},model:{value:t.data_local.name,callback:function(e){t.$set(t.data_local,"name",e)},expression:"data_local.name"}})],1)],1),t._v(" "),a("vx-card",{staticClass:"mt-base",attrs:{"no-shadow":"","card-border":""}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("div",{staticClass:"flex items-end px-3"},[a("feather-icon",{staticClass:"mr-2",attrs:{svgClasses:"w-6 h-6",icon:"LockIcon"}}),t._v(" "),a("span",{staticClass:"font-medium text-lg leading-none"},[t._v("Permisos")])],1),t._v(" "),a("vs-divider")],1)]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("permisos"),expression:"errors.has('permisos')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("permisos")))]),t._v(" "),a("div",{staticClass:"block overflow-x-auto"},[a("vs-table",{staticClass:"permisos",attrs:{data:t.permisosOptions,pagination:"","max-items":"10"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,r){return a("vs-tr",{key:r},[a("vs-td",{attrs:{data:s[r].modulos}},[t._v("\n                          "+t._s(s[r].modulos)+"\n                        ")]),t._v(" "),t._l(s[r].roles,(function(e,s){return a("vs-td",{key:s},[a("vs-checkbox",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"permisos","icon-pack":"feather",icon:"icon-check","vs-value":e.id},model:{value:t.data_local.permisos,callback:function(e){t.$set(t.data_local,"permisos",e)},expression:"data_local.permisos"}})],1)}))],2)}))}}])},[a("template",{slot:"thead"},[a("vs-th",[t._v("Modulo")]),t._v(" "),a("vs-th",[t._v("Agregar")]),t._v(" "),a("vs-th",[t._v("Crear")]),t._v(" "),a("vs-th",[t._v("Inicio")]),t._v(" "),a("vs-th",[t._v("Actualizar")]),t._v(" "),a("vs-th",[t._v("Ver")]),t._v(" "),a("vs-th",[t._v("Eliminar")]),t._v(" "),a("vs-th",[t._v("Editar")])],1)],2)],1)]),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[a("vx-tooltip",{attrs:{color:"primary",text:"Guardar"}},[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:!t.validateForm},on:{click:t.save_changes}},[t._v("Guardar Cambios")])],1),t._v(" "),a("vx-tooltip",{attrs:{color:"primary",text:"Volver"}},[a("vs-button",{staticClass:"ml-4 mt-2",attrs:{"icon-pack":"feather",icon:"icon-arrow-left",to:{name:"roles"}}},[t._v("Volver")])],1),t._v(" "),a("vx-tooltip",{attrs:{color:"primary",text:"Limpiar"}},[a("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"},on:{click:t.reset_data}},[t._v("Limpiar")])],1)],1)])])],1)}),[],!1,null,null,null).exports,l=a("6wlp"),u={components:{itemAddSection1:c},data:function(){return{urlApi:"/roles/roles/"}},watch:{},methods:{},created:function(){l.a.isRegistered||(this.$store.registerModule("itemManagement",l.a),l.a.isRegistered=!0)}},d=Object(o.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"page-item-add"}},[e("vx-card",[e("item-add-section1",{staticClass:"mt-4"})],1)],1)}),[],!1,null,null,null);e.default=d.exports},akPa:function(t,e,a){var s=a("Pbdx");"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,r);s.locals&&(t.exports=s.locals)},o6W3:function(t,e,a){"use strict";var s=a("akPa");a.n(s).a}}]);