(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{"6wlp":function(t,e,a){"use strict";var r=a("bJaO");function s(t){if(null==t)throw new TypeError("Cannot destructure undefined")}var i={agregarItem:function(t,e){return s(t),new Promise((function(t,a){r.a.post("/api/v1"+e.Url+"store",e.item).then((function(e){t(e)})).catch((function(t){a(t)}))}))},editarItem:function(t,e){return s(t),new Promise((function(t,a){var s="";s=e.item.id?e.Url+e.item.id:e.Url,r.a.put("/api/v1"+s,e.item).then((function(e){t(e)})).catch((function(t){a(t)}))}))},traerItems:function(t,e){var a=t.commit;return new Promise((function(t,s){r.a.get("/api/v1"+e).then((function(e){a("SET_ITEMS",e.data.items),t(e)})).catch((function(t){s(t)}))}))},traerItem:function(t,e){return s(t),new Promise((function(t,a){r.a.get("/api/v1"+e.Url+"".concat(e.Id)).then((function(e){t(e)})).catch((function(t){a(t)}))}))},borrarItem:function(t,e){var a=t.commit;return new Promise((function(t,s){r.a.delete("/api/v1"+e.Url+"".concat(e.Id)).then((function(r){a("REMOVE_RECORD",e.Id),t(r)})).catch((function(t){s(t)}))}))},borrarMasivoItem:function(t,e){var a=t.commit;return new Promise((function(t,s){r.a.post("/api/v1"+e.Url+"borrar",e.Items).then((function(r){a("REMOVE_MASSIVE_RECORD",e.Items),t(r)})).catch((function(t){s(t)}))}))}};e.a={isRegistered:!1,namespaced:!0,state:{items:[]},mutations:{SET_ITEMS:function(t,e){t.items=e},REMOVE_RECORD:function(t,e){var a=t.items.findIndex((function(t){return t.id==e}));t.items.splice(a,1)},REMOVE_MASSIVE_RECORD:function(t,e){e.forEach((function(e){var a=t.items.findIndex((function(t){return t.id==e.id}));t.items.splice(a,1)}))}},actions:i,getters:{}}},"97r6":function(t,e,a){"use strict";a.r(e);var r=a("Snq/"),s=a.n(r),i=a("w48C"),o=a.n(i),n=(a("CVKz"),a("bJaO"));a("e7F3").a.localize("en",{custom:{horario:{required:"El horario es requerido"},habilitado:{required:"La descripcion es requerida"},sucursal:{required:"La sucursal es requerida"}}});var c={components:{vSelect:s.a,flatPickr:o.a},props:{},data:function(){return{urlApi:"/horarios/horarios/",data_local:{habilitado:1,sucursales:[]},configdateTimePicker:{enableTime:!0,enableSeconds:!0,noCalendar:!0,time_24hr:!0},empresa:1,empresasOptions:[],sucursalesOptions:[]}},watch:{empresa:function(t){this.data_local.sucursales=[],this.traeSucursales(t)}},computed:{validateForm:function(){return!this.errors.any()}},mounted:function(){this.traeOtrosDatos()},methods:{traeSucursales:function(t){var e=this;t>1?n.a.get("/api/v1/sucursal/combo/"+t).then((function(t){e.sucursalesOptions=t.data.items})).catch((function(t){var a=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})})):(this.sucursalesOptions=[],this.data_local.sucursales=[])},traeOtrosDatos:function(){var t=this;n.a.get("/api/v1/empresas/listemp").then((function(e){t.empresasOptions=e.data.items})).catch((function(e){var a=300==e.response.status?e.response.data.message:e;t.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))},save_changes:function(){var t=this;this.$validator.validateAll().then((function(e){e&&t.$store.dispatch("itemManagement/agregarItem",{item:t.data_local,Url:t.urlApi}).then((function(){t.$router.push({name:"horarios"}),t.showDeleteSuccess()})).catch((function(e){var a=300==e.response.status?e.response.data.message:e;t.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}))},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Guardar registros",text:"Los registros se han guardado exitosamente."})},reset_data:function(){this.data_local={habilitado:1,sucursales:[]},this.sucursalesOptions=[],this.empresa=1,this.errors.clear()}}},l=a("KHd+"),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"item-add"}},[a("div",{staticClass:"vx-row mt-6"},[a("vs-divider",{attrs:{color:"primary"}},[a("h5",[t._v("Datos Horario")])]),t._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[a("vs-select",{ref:"empresas",staticClass:"w-full",attrs:{label:"Empresas",name:"empresa",dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.empresa,callback:function(e){t.empresa=e},expression:"empresa"}},t._l(t.empresasOptions,(function(t){return a("vs-select-item",{key:t.id,attrs:{value:t.id,text:t.razon_social}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"sucursal",staticClass:"w-full",attrs:{autocomplete:"",multiple:"",label:"Sucursales",name:"sucursal",dir:t.$vs.rtl?"rtl":"ltr",disabled:!(t.empresa>1),danger:!!t.errors.first("sucursal"),"danger-text":t.errors.first("sucursal")?t.errors.first("sucursal"):""},model:{value:t.data_local.sucursales,callback:function(e){t.$set(t.data_local,"sucursales",e)},expression:"data_local.sucursales"}},t._l(t.sucursalesOptions,(function(t){return a("vs-select-item",{key:t.id,attrs:{value:t.id,text:t.nombre}})})),1)],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[a("label",{staticClass:"vs-input--label "},[t._v("Horario")]),t._v(" "),a("br"),t._v(" "),a("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{config:t.configdateTimePicker,"label-placeholder":"Horario",placeholder:"Seleccione un horario",name:"horario"},model:{value:t.data_local.horario,callback:function(e){t.$set(t.data_local,"horario",e)},expression:"data_local.horario"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("horario"),expression:"errors.has('horario')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("horario")))])],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[a("label",{staticClass:"vs-input--label "},[t._v("Habilitado")]),t._v(" "),a("br"),t._v(" "),a("vs-switch",{staticClass:"mt-2",model:{value:t.data_local.habilitado,callback:function(e){t.$set(t.data_local,"habilitado",e)},expression:"data_local.habilitado"}})],1),t._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("div",{staticClass:"mt-3 flex flex-wrap items-center justify-end"},[a("vx-tooltip",{attrs:{color:"primary",text:"Guardar"}},[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:!t.validateForm},on:{click:t.save_changes}},[t._v("Guardar Cambios")])],1),t._v(" "),a("vx-tooltip",{attrs:{color:"primary",text:"Volver"}},[a("vs-button",{staticClass:"ml-4 mt-2",attrs:{"icon-pack":"feather",icon:"icon-arrow-left",to:{name:"horarios"}}},[t._v("Volver")])],1),t._v(" "),a("vx-tooltip",{attrs:{color:"primary",text:"Limpiar"}},[a("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"},on:{click:t.reset_data}},[t._v("Limpiar")])],1)],1)])])])],1)])}),[],!1,null,null,null).exports,d=a("6wlp"),m={components:{itemAddSection1:u},data:function(){return{urlApi:"/horarios/horarios/"}},watch:{},methods:{},created:function(){d.a.isRegistered||(this.$store.registerModule("itemManagement",d.a),d.a.isRegistered=!0)}},v=Object(l.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"page-item-add"}},[e("vx-card",[e("item-add-section1",{staticClass:"mt-4"})],1)],1)}),[],!1,null,null,null);e.default=v.exports}}]);