(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"4aQ9":function(e,t,i){(e.exports=i("I1BE")(!1)).push([e.i,".ag-grid-cell-chip.vs-chip-success {\n  color: rgba(var(--vs-success), 1) !important;\n  font-weight: 500;\n}[dir] .ag-grid-cell-chip.vs-chip-success {\n  background: rgba(var(--vs-success), 0.15);\n}\n.ag-grid-cell-chip.vs-chip-warning {\n  color: rgba(var(--vs-warning), 1) !important;\n  font-weight: 500;\n}\n[dir] .ag-grid-cell-chip.vs-chip-warning {\n  background: rgba(var(--vs-warning), 0.15);\n}\n.ag-grid-cell-chip.vs-chip-danger {\n  color: rgba(var(--vs-danger), 1) !important;\n  font-weight: 500;\n}\n[dir] .ag-grid-cell-chip.vs-chip-danger {\n  background: rgba(var(--vs-danger), 0.15);\n}",""])},"6VDd":function(e,t,i){var a=i("Aoq5");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,r);a.locals&&(e.exports=a.locals)},Aoq5:function(e,t,i){(e.exports=i("I1BE")(!1)).push([e.i,"#page-item-list .items-list-filters .vs__actions {\n  position: absolute;\n  top: 50%;\n}[dir] #page-item-list .items-list-filters .vs__actions {\n  -webkit-transform: translateY(-58%);\n          transform: translateY(-58%);\n}[dir=ltr] #page-item-list .items-list-filters .vs__actions {\n  right: 0;\n}[dir=rtl] #page-item-list .items-list-filters .vs__actions {\n  left: 0;\n}",""])},NS5T:function(e,t,i){"use strict";i.r(t);var a=i("QBvj"),r=(i("7emp"),i("Snq/")),s=i.n(r),o=i("bJaO"),n=i("6wlp"),l={components:{},data:function(){return{}},name:"CellRendererActions",methods:{viewRecord:function(){this.$router.push("../item-view/"+this.params.data.id).catch((function(){}))},editRecord:function(){this.$router.push("../item-edit/"+this.params.data.id).catch((function(){}))},confirmDeleteRecord:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirmar Eliminacion",text:'Este seguro que desea eliminar el siguiente agendamiento "'.concat(this.params.data.rut,'"'),accept:this.deleteRecord,acceptText:"Eliminar"})},deleteRecord:function(){var e=this;this.$store.dispatch("itemManagement/borrarItem",{Id:this.params.data.id,Url:this.$parent.$parent.urlApi}).then((function(){e.showDeleteSuccess()})).catch((function(t){var i=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:i,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Agendamiento Eliminado",text:"El agendamiento seleccionado ya fue eliminado"})}}},c=i("KHd+"),d=Object(c.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{style:{direction:this.$vs.rtl?"rtl":"ltr"}},[t("feather-icon",{attrs:{icon:"EyeIcon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:this.viewRecord}}),this._v(" "),t("feather-icon",{attrs:{icon:"Edit3Icon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:this.editRecord}}),this._v(" "),t("feather-icon",{attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 mr-4 hover:text-danger cursor-pointer"},on:{click:this.confirmDeleteRecord}})],1)}),[],!1,null,null,null).exports,u={name:"CellRendererStatus",computed:{chipColor:function(){return function(e){return!0===e?"success":!1===e?"danger":void 0}}}},p=(i("xeYJ"),Object(c.a)(u,(function(){var e=this.$createElement,t=this._self._c||e;return t("vs-chip",{staticClass:"ag-grid-cell-chip",attrs:{color:this.chipColor(this.params.value)}},[t("span",[this._v(this._s(!0===this.params.value?"Activo":"Vencido"))])])}),[],!1,null,null,null).exports),m=i("BsVO"),v=i("xxRG"),h={components:{AgGridVue:a.AgGridVue,vSelect:s.a,CellRendererActions:d,CellRendererStatus:p},data:function(){return{urlApi:"/agendamientos/agendamientos/",tipoFilter:{label:"Todos",value:"all"},tipoOptions:[{label:"Todos",value:"all"},{label:"Zarpe",value:"Zarpe"},{label:"Recogida",value:"Recogida"}],estadoFilter:{label:"Todos",value:"all"},estadoOptions:[{label:"Todos",value:"all"},{label:"Activo",value:!0},{label:"Vencido",value:!1}],periodoFilter:{label:"Todos",value:"all"},periodoOptions:[{label:"Todos",value:"all"},{label:"Diario",value:"Diario"},{label:"Mensual",value:"Mensual"},{label:"Permanente",value:"Permanente"}],sucursalFilter:{label:"Todos",value:"all",id:0},sucursalOptions:[{label:"Todos",value:"all",id:0}],empresaFilter:{label:"Todos",value:"all",id:0},empresaOptions:[{label:"Todos",value:"all",id:0}],horarioFilter:{label:"Todos",value:"all"},horarioOptions:[{label:"Todos",value:"all"}],searchQuery:"",gridApi:null,frameworkComponents:{customLoadingOverlay:m.a,customNoRowsOverlay:v.a},loadingOverlayComponent:"customLoadingOverlay",loadingOverlayComponentParams:{loadingMessage:"Un momento, por favor espere..."},noRowsOverlayComponent:"customNoRowsOverlay",noRowsOverlayComponentParams:{noRowsMessageFunc:function(){return"No hay registros disponibles  "}},gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"ID",field:"id",minWidth:120,filter:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,headerCheckboxSelection:!0},{headerName:"Estado",colId:"estado",filter:!0,minWidth:110,valueGetter:function(e){return!(new Date>new Date(e.data.fecha_fin))},cellRendererFramework:"CellRendererStatus"},{headerName:"Periodo",field:"periodo",filter:!0,minWidth:140,valueGetter:function(e){if(1==e.data.tipo_fecha)var t="Diario";else if(2==e.data.tipo_fecha)t="Mensual";else t="Permanente";return t}},{headerName:"Inicio",field:"fecha_inicio",filter:!0,minWidth:130,valueGetter:function(e){return new Date(e.data.fecha_inicio).toLocaleDateString("en-GB")}},{headerName:"Termino",field:"fecha_fin",filter:!0,minWidth:130,valueGetter:function(e){return new Date(e.data.fecha_fin).toLocaleDateString("en-GB")}},{headerName:"Rut",field:"rut",filter:!0,minWidth:140},{headerName:"Nombre",filter:!0,colId:"nombre",minWidth:140,valueGetter:function(e){return e.data.nombre+" "+e.data.apellido}},{headerName:"Tipo",field:"tipo",filter:!0,minWidth:135},{headerName:"Horario",field:"horario_plan",filter:!0,minWidth:135},{headerName:"Acciones",field:"transactions",minWidth:155,cellRendererFramework:"CellRendererActions"}],components:{CellRendererActions:d,CellRendererStatus:p}}},watch:{periodoFilter:function(e){this.setColumnFilter("periodo",e.value)},estadoFilter:function(e){this.setColumnFilter("estado",e.value)},tipoFilter:function(e){this.setColumnFilter("tipo",e.value)},horarioFilter:function(e){this.setColumnFilter("horario",e.value)},sucursalFilter:function(e){this.traeHorarios(e.id)},empresaFilter:function(e){this.traeSucursales(e.id)}},computed:{itemsData:function(){return this.$store.state.itemManagement.items},paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10},totalPages:function(){return this.gridApi?this.gridApi.paginationGetTotalPages():0},currentPage:{get:function(){return this.gridApi?this.gridApi.paginationGetCurrentPage()+1:1},set:function(e){this.gridApi.paginationGoToPage(e-1)}}},methods:{onGridSizeChanged:function(e){var t=e.columnApi.getAllColumns();e.columnApi.setColumnsVisible(t,!0),e.api.sizeColumnsToFit()},confirmMassiveDeleteRecord:function(){0!==this.gridApi.getSelectedRows().length?this.$vs.dialog({type:"confirm",color:"danger",title:"Confirmar Eliminacion",text:"Este seguro que desea eliminar los registros seleccionados",accept:this.massivedeleteRecord,acceptText:"Eliminar"}):this.$vs.dialog({color:"danger",title:"Error",text:"Debe seleccionar al menos un registro para realizar esta accion."})},massivedeleteRecord:function(){var e=this;this.$store.dispatch("itemManagement/borrarMasivoItem",{Items:this.gridApi.getSelectedRows(),Url:this.urlApi}).then((function(){e.showMassiveDeleteSuccess()})).catch((function(t){var i=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:i,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))},showMassiveDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Agendamientos Eliminados",text:"Los registros ya fueron eliminados."})},setColumnFilter:function(e,t){var i=null;"all"!==t&&(i={type:"equals",filter:t}),this.gridApi.getFilterInstance(e).setModel(i),this.gridApi.onFilterChanged()},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.horarioFilter=this.tipoFilter=this.sucursalFilter=this.empresaFilter=this.estadoFilter=this.periodoFilter={label:"Todos",value:"all"},this.$refs.filterCard.removeRefreshAnimation()},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)},importRecord:function(){this.$router.push("../item-import/").catch((function(){}))},addRecord:function(){this.$router.push("../item-add/").catch((function(){}))},traeHorarios:function(e){var t=this;e>1?o.a.get("/api/v1/horarios/combo/"+e).then((function(e){var i=e.data.items;i.push({label:"Todos",value:"all",id:0}),t.horarioOptions=i.reverse()})).catch((function(e){var i=300==e.response.status?e.response.data.message:e;t.$vs.notify({title:"Error",text:i,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})})):(this.horarioFilter={label:"Todos",value:"all",id:0},this.horarioOptions=[{label:"Todos",value:"all",id:0}])},traeSucursales:function(e){var t=this;e>1?o.a.get("/api/v1/sucursal/combo/"+e).then((function(e){var i=e.data.items;i.push({label:"Todos",value:"all",id:0}),t.sucursalOptions=i.reverse()})).catch((function(e){var i=300==e.response.status?e.response.data.message:e;t.$vs.notify({title:"Error",text:i,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})})):(this.sucursalFilter={label:"Todos",value:"all",id:0},this.sucursalOptions=[{label:"Todos",value:"all",id:0}])},traeOtrosDatos:function(){var e=this;o.a.get("/api/v1/empresas/combo").then((function(t){var i=t.data.items;i.push({label:"Todos",value:"all",id:0}),e.empresaOptions=i.reverse()})).catch((function(t){var i=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:i,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}},mounted:function(){if(this.gridApi=this.gridOptions.api,this.$vs.rtl){var e=this.$refs.agGridTable.$el.querySelector(".ag-header-container");e.style.left="-"+String(Number(e.style.transform.slice(11,-3))+9)+"px"}this.traeOtrosDatos()},created:function(){var e=this;n.a.isRegistered||(this.$store.registerModule("itemManagement",n.a),n.a.isRegistered=!0),this.$store.dispatch("itemManagement/traerItems",this.urlApi).catch((function(t){var i=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:i,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}},g=(i("lK5G"),Object(c.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"page-item-list"}},[i("vx-card",{ref:"filterCard",staticClass:"items-list-filters mb-8",attrs:{title:"Filtros",collapseAction:"",refreshContentAction:""},on:{refresh:e.resetColFilters}},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Empresa")]),e._v(" "),i("v-select",{attrs:{options:e.empresaOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.empresaFilter,callback:function(t){e.empresaFilter=t},expression:"empresaFilter"}})],1),e._v(" "),i("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Sucursales")]),e._v(" "),i("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.sucursalOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.sucursalFilter,callback:function(t){e.sucursalFilter=t},expression:"sucursalFilter"}})],1),e._v(" "),i("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Horario")]),e._v(" "),i("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.horarioOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.horarioFilter,callback:function(t){e.horarioFilter=t},expression:"horarioFilter"}})],1),e._v(" "),i("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Tipo")]),e._v(" "),i("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.tipoOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.tipoFilter,callback:function(t){e.tipoFilter=t},expression:"tipoFilter"}})],1)]),e._v(" "),i("div",{staticClass:"vx-row mt-2"},[i("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Estado")]),e._v(" "),i("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.estadoOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.estadoFilter,callback:function(t){e.estadoFilter=t},expression:"estadoFilter"}})],1),e._v(" "),i("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[i("label",{staticClass:"text-sm opacity-75"},[e._v("Periodo")]),e._v(" "),i("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.periodoOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.periodoFilter,callback:function(t){e.periodoFilter=t},expression:"periodoFilter"}})],1)])]),e._v(" "),i("div",{staticClass:"vx-card p-6"},[i("div",{staticClass:"flex flex-wrap items-center"},[i("div",{staticClass:"flex-grow"},[i("vs-dropdown",{staticClass:"cursor-pointer"},[i("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[i("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+" - "+e._s(e.itemsData.length-e.currentPage*e.paginationPageSize>0?e.currentPage*e.paginationPageSize:e.itemsData.length)+" of "+e._s(e.itemsData.length))]),e._v(" "),i("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e._v(" "),i("vs-dropdown-menu",[i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(10)}}},[i("span",[e._v("10")])]),e._v(" "),i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(20)}}},[i("span",[e._v("20")])]),e._v(" "),i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(25)}}},[i("span",[e._v("25")])]),e._v(" "),i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(30)}}},[i("span",[e._v("30")])])],1)],1)],1),e._v(" "),i("vx-tooltip",{attrs:{color:"primary",text:"Importar"}},[i("vs-button",{staticClass:"sm:mr-4 mb-4 md:mb-0",attrs:{"icon-pack":"feather",icon:"icon-upload"},on:{click:e.importRecord}},[e._v("IMPORTAR")])],1),e._v(" "),i("vx-tooltip",{attrs:{color:"primary",text:"Agregar"}},[i("vs-button",{staticClass:"sm:mr-4 mb-4 md:mb-0",attrs:{"icon-pack":"feather",icon:"icon-plus"},on:{click:e.addRecord}},[e._v("AGREGAR")])],1),e._v(" "),i("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"Buscar..."},on:{input:e.updateSearchQuery},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),i("vs-dropdown",{staticClass:"cursor-pointer"},[i("div",{staticClass:"p-3 shadow-drop rounded-lg d-theme-dark-light-bg cursor-pointer flex items-end justify-center text-lg font-medium w-32"},[i("span",{staticClass:"mr-2 leading-none"},[e._v("Acciones")]),e._v(" "),i("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e._v(" "),i("vs-dropdown-menu",[i("vs-dropdown-item",{on:{click:function(t){return e.confirmMassiveDeleteRecord()}}},[i("span",{staticClass:"flex items-center"},[i("feather-icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",svgClasses:"h-4 w-4"}}),e._v(" "),i("span",[e._v("Eliminar")])],1)]),e._v(" "),i("vs-dropdown-item",{on:{click:function(t){return e.gridApi.exportDataAsCsv()}}},[i("span",{staticClass:"flex items-center"},[i("feather-icon",{staticClass:"mr-2",attrs:{icon:"SaveIcon",svgClasses:"h-4 w-4"}}),e._v(" "),i("span",[e._v("Exportar")])],1)])],1)],1)],1),e._v(" "),i("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"grid-wrapper"}},[i("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-3 ag-grid-table",attrs:{components:e.components,gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.itemsData,rowSelection:"multiple",colResizeDefault:"shift",animateRows:!0,floatingFilter:!0,pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl,frameworkComponents:e.frameworkComponents,loadingOverlayComponent:e.loadingOverlayComponent,loadingOverlayComponentParams:e.loadingOverlayComponentParams,noRowsOverlayComponent:e.noRowsOverlayComponent,noRowsOverlayComponentParams:e.noRowsOverlayComponentParams},on:{"grid-size-changed":e.onGridSizeChanged}})],1),e._v(" "),i("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)}),[],!1,null,null,null));t.default=g.exports},lK5G:function(e,t,i){"use strict";var a=i("6VDd");i.n(a).a},uFls:function(e,t,i){var a=i("4aQ9");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,r);a.locals&&(e.exports=a.locals)},xeYJ:function(e,t,i){"use strict";var a=i("uFls");i.n(a).a}}]);