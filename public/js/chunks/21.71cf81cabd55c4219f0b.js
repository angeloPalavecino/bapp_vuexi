(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/HZY":function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"#page-item-list .items-list-filters .vs__actions {\n  position: absolute;\n  top: 50%;\n}[dir] #page-item-list .items-list-filters .vs__actions {\n  -webkit-transform: translateY(-58%);\n          transform: translateY(-58%);\n}[dir=ltr] #page-item-list .items-list-filters .vs__actions {\n  right: 0;\n}[dir=rtl] #page-item-list .items-list-filters .vs__actions {\n  left: 0;\n}",""])},FDqP:function(e,t,a){var i=a("/HZY");"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,o);i.locals&&(e.exports=i.locals)},"f+ZX":function(e,t,a){"use strict";var i=a("bJaO"),o=a("+jP+");a("e7F3").a.localize("en",{custom:{tipo_documento:{required:"El tipo de documento es requerido"},fecha_vencimiento:{required:"La fecha de vencimiento es requerida"}}});var n={name:"PopUpDocuments",props:{popUpStatus:Boolean,data:Object,tipo:Number,url:String},components:{Datepicker:o.a},data:function(){return{item_data:{tipo_documento:"",fecha_vencimiento:""},item_data_documents:null,typoDocOptions:[]}},watch:{popUpStatus:function(){if(1==this.popUpStatus){this.traeOtrosDatos();var e=document.querySelector(".line-vs-tabs");e.style.width="95px",e.style.left="0px",this.$refs.tabdocs.activeChild(0),this.$refs.tabdocs.changePositionLine(0),this.item_data={tipo_documento:"",fecha_vencimiento:""},this.$refs.fileupload.value="",this.errors.clear()}}},mounted:function(){},methods:{close:function(){this.$emit("close-popup",!1)},getStatusDocs:function(e){var t=new Date,a=new Date(e);return a.getTime()>=t.getTime()?"success":(a.getTime(),t.getTime(),"danger")},uploadData:function(e){var t=e.target.files[0].type,a=e.target.files[0].size;"image/png"==t||"image/jpeg"==t||"application/msword"==t||"application/pdf"==t?a<=2e6?(this.item_data.file=e.target.files[0],this.item_data.filename=e.target.files[0].name):(this.$refs.fileupload.value="",this.$vs.notify({title:"Error",text:"El archivo no tiene el tamañano adecuado (Max. 2 MB)",color:"danger",iconPack:"feather",icon:"icon-alert-circle"})):(this.$refs.fileupload.value="",this.$vs.notify({title:"Error",text:"El archivo no tiene el formato correcto",color:"danger",iconPack:"feather",icon:"icon-alert-circle"}))},upload:function(){var e=this;this.$validator.validateAll().then((function(t){if(t){var a=new FormData;a.append("file",e.item_data.file),a.append("tipo_documento_id",e.item_data.tipo_documento.split("|")[0]),a.append("tipo_documento",e.item_data.tipo_documento.split("|")[1]),a.append("fecha_vencimiento",e.item_data.fecha_vencimiento),a.append("id",e.data.id),e.enviaData(a)}}))},enviaData:function(e){var t,a,o,n=this,s=this;this.item_data.file.size>0&&i.a.post("/api/v1"+this.url+"upload",e,{headers:(t={"Content-Type":"multipart/form-data"},a="Content-Type",o="application/json",a in t?Object.defineProperty(t,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[a]=o,t)}).then((function(e){s.$vs.notify({title:"Exito",text:"El documento se ha subido con exito!.",color:"success",iconPack:"feather",icon:"icon-alert-circle"}),n.close()})).catch((function(e){var t=300==e.response.status?e.response.data.message:e;s.$vs.notify({title:"Error",text:t,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))},downloadDocument:function(e,t){var a=this;i.a.get("/api/v1"+this.url+"document/"+e,{responseType:"blob"}).then((function(e){var a=document.createElement("a"),i=window.URL.createObjectURL(e.data);a.href=i,a.download=t,document.body.append(a),a.click(),a.remove(),window.URL.revokeObjectURL(i)})).catch((function(e){var t=300==e.response.status?e.response.data.message:e;a.$vs.notify({title:"Error",text:t,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))},traeOtrosDatos:function(){var e=this;i.a.get("/api/v1"+this.url+"documents/"+this.data.id).then((function(t){e.item_data_documents=t.data.items})).catch((function(t){var a=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})})),i.a.get("/api/v1/tipodocumentos/tipodocumentos/"+this.tipo).then((function(t){e.typoDocOptions=t.data.items})).catch((function(t){var a=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}},created:function(){this.traeOtrosDatos()}},s=a("KHd+"),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vs-popup",{attrs:{classContent:"popup-example",title:"Documentos",active:this.popUpStatus},on:{close:e.close}},[a("vs-tabs",{ref:"tabdocs",attrs:{color:"primary"}},[a("vs-tab",{attrs:{label:"Adjuntar","icon-pack":"feather",icon:"icon-upload"}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2 w-full mt-2"},[a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Tipo de Documento",name:"tipo_documento"},model:{value:e.item_data.tipo_documento,callback:function(t){e.$set(e.item_data,"tipo_documento",t)},expression:"item_data.tipo_documento"}},e._l(e.typoDocOptions,(function(e){return a("vs-select-item",{key:e.id,attrs:{value:e.id+"|"+e.name,text:e.name}})})),1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("tipo_documento"),expression:"errors.has('tipo_documento')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("tipo_documento")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-3"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full select-large mt-5",attrs:{format:"yyyy-MM-dd",label:"Fecha de Vencimiento",placeholder:"Fecha de Vencimiento",name:"fecha_vencimiento"},model:{value:e.item_data.fecha_vencimiento,callback:function(t){e.$set(e.item_data,"fecha_vencimiento",t)},expression:"item_data.fecha_vencimiento"}}),e._v(" "),a("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("fecha_vencimiento")))])],1),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-5"},[a("input",{ref:"fileupload",staticClass:"w-full",attrs:{label:"Documento",type:"file",name:"file",id:"file",accept:"application/pdf,application/msword,application/image/png,image/jpeg"},on:{change:e.uploadData}}),e._v(" "),a("span",{staticClass:"text-sm"},[e._v("Fomatos permitidos: JPG - PNG - DOC - PDF")]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-sm"},[a("i",[e._v("Tamaño maximo 2 MB")])])]),e._v(" "),a("div",{staticClass:"vx-col md:w-1/2 w-full mt-5"},[a("vs-button",{attrs:{color:"primary",type:"filled"},on:{click:function(t){return e.upload()}}},[e._v("Adjuntar")])],1)]),e._v(" "),a("div",{staticClass:"vx-row"})]),e._v(" "),a("vs-tab",{attrs:{label:"Documentos","icon-pack":"feather",icon:"icon-file-text"}},[a("vs-table",{ref:"tabledocs",attrs:{"max-items":"4",pagination:"",data:e.item_data_documents},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.data;return e._l(i,(function(t,o){return a("vs-tr",{key:o},[a("vs-td",{attrs:{colspan:"2"}},[e._v("\n                     "+e._s(t.name.split(/[.,\/-]/)[1])+"\n                   ")]),e._v(" "),a("vs-td",[a("vs-chip",{attrs:{color:e.getStatusDocs(t.fecha_vencimiento)}},[e._v(e._s(t.fecha_vencimiento))])],1),e._v(" "),a("vs-td",{attrs:{data:i[o].url}},[a("a",{staticStyle:{cursor:"pointer"},attrs:{rel:"nofollow"},on:{click:function(t){return e.downloadDocument(i[o].id,i[o].name)}}},[e._v("Descargar")])])],1)}))}}])},[a("template",{slot:"header"},[a("h3",[e._v("\n                   Documentos Subidos\n                 ")])]),e._v(" "),a("template",{slot:"thead"},[a("vs-th",{attrs:{colspan:"2"}},[e._v("\n                    Documento\n                 ")]),e._v(" "),a("vs-th",[e._v("\n                    Vencimiento\n                 ")]),e._v(" "),a("vs-th",[e._v("\n                   Descarga\n                 ")])],1)],2)],1)],1)],1)}),[],!1,null,null,null);t.a=r.exports},olgK:function(e,t,a){"use strict";a.r(t);var i=a("QBvj"),o=(a("7emp"),a("Snq/")),n=a.n(o),s=(a("bJaO"),a("6wlp")),r={components:{PopUpDocuments:a("f+ZX").a},data:function(){return{popUpDocs:!1}},name:"CellRendererActions",methods:{closepopup:function(e){this.popUpDocs=e},viewRecord:function(){this.$router.push("../item-view/"+this.params.data.id).catch((function(){}))},editRecord:function(){this.$router.push("../item-edit/"+this.params.data.id).catch((function(){}))},confirmDeleteRecord:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirmar Eliminacion",text:'Este seguro que desea eliminar el siguiente movil "'.concat(this.params.data.numero_movil,'"'),accept:this.deleteRecord,acceptText:"Eliminar"})},deleteRecord:function(){var e=this;this.$store.dispatch("itemManagement/borrarItem",{Id:this.params.data.id,Url:this.$parent.$parent.urlApi}).then((function(){e.showDeleteSuccess()})).catch((function(t){var a=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Moviles Eliminado",text:"El movil seleccionado ya fue eliminado"})}}},c=a("KHd+"),l=Object(c.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{direction:e.$vs.rtl?"rtl":"ltr"}},[a("feather-icon",{attrs:{icon:"EyeIcon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:e.viewRecord}}),e._v(" "),a("feather-icon",{attrs:{icon:"Edit3Icon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:e.editRecord}}),e._v(" "),a("feather-icon",{attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 mr-4 hover:text-danger cursor-pointer"},on:{click:e.confirmDeleteRecord}}),e._v(" "),a("feather-icon",{attrs:{icon:"FileIcon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:function(t){e.popUpDocs=!0}}}),e._v(" "),a("pop-up-documents",{attrs:{popUpStatus:e.popUpDocs,data:this.params.data,tipo:0,url:this.$parent.$parent.urlApi},on:{"close-popup":e.closepopup}})],1)}),[],!1,null,null,null).exports,d=a("/m9k"),p=a("LQoU"),m={components:{AgGridVue:i.AgGridVue,vSelect:n.a,CellRendererActions:l},data:function(){return{urlApi:"/car/car/",searchQuery:"",gridApi:null,frameworkComponents:{customLoadingOverlay:d.a,customNoRowsOverlay:p.a},loadingOverlayComponent:"customLoadingOverlay",loadingOverlayComponentParams:{loadingMessage:"Un momento, por favor espere..."},noRowsOverlayComponent:"customNoRowsOverlay",noRowsOverlayComponentParams:{noRowsMessageFunc:function(){return"No hay registros disponibles  "}},gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"ID",field:"id",minWidth:120,filter:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,headerCheckboxSelection:!0},{headerName:"N° Movil",field:"numero_movil",filter:!0,minWidth:185},{headerName:"Patente",field:"patente",filter:!0,minWidth:160},{headerName:"N° Asientos",field:"asientos",filter:!0,minWidth:135},{headerName:"Asociado",filter:!0,minWidth:120,valueGetter:function(e){return e.data.name+" "+e.data.lastname}},{headerName:"Acciones",field:"transactions",minWidth:155,cellRendererFramework:"CellRendererActions"}],components:{CellRendererActions:l}}},watch:{},computed:{itemsData:function(){return this.$store.state.itemManagement.items},paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10},totalPages:function(){return this.gridApi?this.gridApi.paginationGetTotalPages():0},currentPage:{get:function(){return this.gridApi?this.gridApi.paginationGetCurrentPage()+1:1},set:function(e){this.gridApi.paginationGoToPage(e-1)}}},methods:{onGridSizeChanged:function(e){var t=e.columnApi.getAllColumns();e.columnApi.setColumnsVisible(t,!0),e.api.sizeColumnsToFit()},confirmMassiveDeleteRecord:function(){0!==this.gridApi.getSelectedRows().length?this.$vs.dialog({type:"confirm",color:"danger",title:"Confirmar Eliminacion",text:"Este seguro que desea eliminar los registros seleccionados",accept:this.massivedeleteRecord,acceptText:"Eliminar"}):this.$vs.dialog({color:"danger",title:"Error",text:"Debe seleccionar al menos un registro para realizar esta accion."})},massivedeleteRecord:function(){var e=this;this.$store.dispatch("itemManagement/borrarMasivoItem",{Items:this.gridApi.getSelectedRows(),Url:this.urlApi}).then((function(){e.showMassiveDeleteSuccess()})).catch((function(t){var a=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))},showMassiveDeleteSuccess:function(){this.$vs.notify({color:"success",title:"Moviles Eliminados",text:"Los registros ya fueron eliminados."})},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)},addRecord:function(){this.$router.push("../item-add/").catch((function(){}))}},mounted:function(){if(this.gridApi=this.gridOptions.api,this.$vs.rtl){var e=this.$refs.agGridTable.$el.querySelector(".ag-header-container");e.style.left="-"+String(Number(e.style.transform.slice(11,-3))+9)+"px"}},created:function(){var e=this;s.a.isRegistered||(this.$store.registerModule("itemManagement",s.a),s.a.isRegistered=!0),this.$store.dispatch("itemManagement/traerItems",this.urlApi).catch((function(t){var a=300==t.response.status?t.response.data.message:t;e.$vs.notify({title:"Error",text:a,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}))}},u=(a("s/Wa"),Object(c.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-item-list"}},[a("div",{staticClass:"vx-card p-6"},[a("div",{staticClass:"flex flex-wrap items-center"},[a("div",{staticClass:"flex-grow"},[a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+" - "+e._s(e.itemsData.length-e.currentPage*e.paginationPageSize>0?e.currentPage*e.paginationPageSize:e.itemsData.length)+" of "+e._s(e.itemsData.length))]),e._v(" "),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e._v(" "),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(10)}}},[a("span",[e._v("10")])]),e._v(" "),a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(20)}}},[a("span",[e._v("20")])]),e._v(" "),a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(25)}}},[a("span",[e._v("25")])]),e._v(" "),a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(30)}}},[a("span",[e._v("30")])])],1)],1)],1),e._v(" "),a("vx-tooltip",{attrs:{color:"primary",text:"Agregar"}},[a("vs-button",{staticClass:"sm:mr-4 mb-4 md:mb-0",attrs:{"icon-pack":"feather",icon:"icon-plus"},on:{click:e.addRecord}},[e._v("AGREGAR")])],1),e._v(" "),a("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"Buscar..."},on:{input:e.updateSearchQuery},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-3 shadow-drop rounded-lg d-theme-dark-light-bg cursor-pointer flex items-end justify-center text-lg font-medium w-32"},[a("span",{staticClass:"mr-2 leading-none"},[e._v("Acciones")]),e._v(" "),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e._v(" "),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(t){return e.confirmMassiveDeleteRecord()}}},[a("span",{staticClass:"flex items-center"},[a("feather-icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",svgClasses:"h-4 w-4"}}),e._v(" "),a("span",[e._v("Eliminar")])],1)]),e._v(" "),a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.exportDataAsCsv()}}},[a("span",{staticClass:"flex items-center"},[a("feather-icon",{staticClass:"mr-2",attrs:{icon:"SaveIcon",svgClasses:"h-4 w-4"}}),e._v(" "),a("span",[e._v("Exportar")])],1)])],1)],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"grid-wrapper"}},[a("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-3 ag-grid-table",attrs:{components:e.components,gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.itemsData,rowSelection:"multiple",colResizeDefault:"shift",animateRows:!0,floatingFilter:!0,pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl,frameworkComponents:e.frameworkComponents,loadingOverlayComponent:e.loadingOverlayComponent,loadingOverlayComponentParams:e.loadingOverlayComponentParams,noRowsOverlayComponent:e.noRowsOverlayComponent,noRowsOverlayComponentParams:e.noRowsOverlayComponentParams},on:{"grid-size-changed":e.onGridSizeChanged}})],1),e._v(" "),a("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])}),[],!1,null,null,null));t.default=u.exports},"s/Wa":function(e,t,a){"use strict";var i=a("FDqP");a.n(i).a}}]);